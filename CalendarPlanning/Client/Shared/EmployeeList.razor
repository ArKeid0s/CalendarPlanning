@using Microsoft.AspNetCore.Components.QuickGrid;
@inject HttpClient Http
<h3>EmployeeList</h3>

@if (employees is null)
{
    <p><em>Loading...</em></p>
}
else
{
    <QuickGrid Items="employees.AsQueryable()" Pagination="paginationState">
        <PropertyColumn Property="e => e.FirstName" Title="First Name" Sortable="true" />
        <PropertyColumn Property="e => e.LastName" Title="Last Name" Sortable="true" />
        <PropertyColumn Property="e => e.Store.Name" Title="Store" />
        <TemplateColumn>
            <button class="btn btn-primary" onclick="@(() => ShowItToMe(context))"><i class="oi oi-cloud" /></button>
        </TemplateColumn>
    </QuickGrid>

    <Paginator State="paginationState" />
}


@code {
    private List<Employee>? employees;

    PaginationState paginationState = new PaginationState() { ItemsPerPage = 10 };

    protected override async Task OnInitializedAsync()
    {
        employees = await Http.GetFromJsonAsync<List<Employee>>("api/Employee");
    }

    protected void ShowItToMe(Employee employee)
    {
        Console.WriteLine($"Employee: {employee.FirstName} {employee.LastName}");
    }
}
